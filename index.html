<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品搜尋</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
    </style>
</head>
<body>

    <h1>商品搜尋</h1>
    
    <!-- 搜尋框和按鈕 -->
    <input type="text" id="searchInput" placeholder="輸入商品名稱或編號">
    <button onclick="search()">搜尋</button>
    
    <!-- 顯示結果的區域 -->
    <div id="results"></div>

    <script>
        // 搜尋功能
        function search() {
    const query = document.getElementById("searchInput").value.toLowerCase();

    // 使用固定的 JSON 檔案名稱
    const jsonFilePath = 'latest.json';

    fetch(jsonFilePath)
        .then(response => {
            if (!response.ok) {
                throw new Error(`無法讀取 JSON 檔案: ${jsonFilePath}`);
            }
            return response.json();
        })
        .then(data => {
            const filteredResults = data.filter(item => {
                // 修改為正確的屬性名稱，例如 '商品名稱' 和 '商品編號'
                return (item["商品名稱"] && item["商品名稱"].toLowerCase().includes(query)) || 
                       (item["商品編號"] && item["商品編號"].includes(query));
            });

            displayResults(filteredResults);
        })
        .catch(error => {
            document.getElementById("results").innerHTML = `<p>${error.message}</p>`;
        });
}


        // 將結果顯示在表格中
        function displayResults(results) {
            if (results.length === 0) {
                document.getElementById("results").innerHTML = "<p>找不到符合條件的商品。</p>";
                return;
            }

            let table = "<table><tr><th>商品編號</th><th>商品名稱</th><th>價格</th></tr>";
            results.forEach(item => {
                table += `<tr><td>${item.id}</td><td>${item.name}</td><td>${item.price}</td></tr>`;
            });
            table += "</table>";

            document.getElementById("results").innerHTML = table;
        }
    </script>

</body>
</html>
